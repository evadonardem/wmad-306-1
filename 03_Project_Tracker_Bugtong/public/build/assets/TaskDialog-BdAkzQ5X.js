import{r as o,j as e}from"./app-Ca0JlKGK.js";import{d as I}from"./index-C9l5U3SX.js";import{u as F}from"./Feedback-CnUXsYYQ.js";import{D as W,a as w,b as P,c as B}from"./DialogTitle-4k5WHtwW.js";import{T as j,F as v,I as y,S as T}from"./TextField-tksENqEP.js";import{M as C}from"./MenuItem-w9jaH8M-.js";import{B as D}from"./List-DwQNh8Dc.js";import"./listItemIconClasses-CzsVX43w.js";import"./listItemTextClasses-B5P6-7Zz.js";const L=[{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"},{value:"critical",label:"Critical"}],M=[{value:"todo",label:"To Do"},{value:"in_progress",label:"In Progress"},{value:"done",label:"Done"}];function J({open:m,onClose:p,onSuccess:h,task:t,project:S}){const r=!!t,[l,x]=o.useState({title:t?.title||"",description:t?.description||"",priority:t?.priority||"medium",status:t?.status||"todo"}),[s,b]=o.useState({}),[f,n]=o.useState(!1),g=F();o.useEffect(()=>{x({title:t?.title||"",description:t?.description||"",priority:t?.priority||"medium",status:t?.status||"todo"}),b({})},[t,m]);const a=i=>{const{name:u,value:d}=i.target;x(c=>({...c,[u]:d}))},E=i=>{i.preventDefault(),n(!0);const u=r?"put":"post",d=r?`/tasks/${t.id}`:`/projects/${S.id}/tasks`;I.Inertia[u](d,l,{onSuccess:()=>{g.show(`Task ${r?"updated":"created"}!`,"success"),n(!1),h&&h()},onError:c=>{b(c),g.show("Please fix the errors.","error"),n(!1)}})};return e.jsx(W,{open:m,onClose:p,maxWidth:"sm",fullWidth:!0,children:e.jsxs("form",{onSubmit:E,children:[e.jsx(w,{children:r?"Edit Task":"Add Task"}),e.jsxs(P,{children:[e.jsx(j,{autoFocus:!0,margin:"dense",name:"title",label:"Title",type:"text",fullWidth:!0,required:!0,value:l.title,onChange:a,error:!!s.title,helperText:s.title,inputProps:{maxLength:255}}),e.jsx(j,{margin:"dense",name:"description",label:"Description",type:"text",fullWidth:!0,multiline:!0,minRows:2,value:l.description,onChange:a,error:!!s.description,helperText:s.description}),e.jsxs(v,{fullWidth:!0,sx:{mt:2},children:[e.jsx(y,{id:"priority-label",children:"Priority"}),e.jsx(T,{labelId:"priority-label",name:"priority",value:l.priority,label:"Priority",onChange:a,children:L.map(i=>e.jsx(C,{value:i.value,children:i.label},i.value))})]}),e.jsxs(v,{fullWidth:!0,sx:{mt:2},children:[e.jsx(y,{id:"status-label",children:"Status"}),e.jsx(T,{labelId:"status-label",name:"status",value:l.status,label:"Status",onChange:a,children:M.map(i=>e.jsx(C,{value:i.value,children:i.label},i.value))})]})]}),e.jsxs(B,{children:[e.jsx(D,{onClick:p,disabled:f,children:"Cancel"}),e.jsx(D,{type:"submit",variant:"contained",disabled:f,children:r?"Update":"Create"})]})]})})}export{J as default};
